from netmiko import (
    ConnectHandler,
    NetmikoTimeoutException,
    NetmikoAuthenticationException,
)
import csv
import netmiko
#IP_LIST = open('devices.txt')
#for IP in IP_LIST:
connect = {
'device_type': 'cisco_ios_telnet',
'ip': '',
#'username': '',
#'password': '',
'port': ''
}
net_connect = ConnectHandler(**connect)
print("Yeah, I connected to device IP")
net_connect.enable()
serial_number_output = net_connect.send_command('show system')
SAVE_FILE = open("serial_number.txt", 'a')
SAVE_FILE.write(serial_number_output)
SAVE_FILE.close
with open("serial_number.txt") as src, open("serial_number1.csv", 'a', newline='') as dst:
    for line in src:
        line_list = line.split()
        if "System Name" in line: 
           host_name =  line.split()[-1]
        elif "Serial Number" in line:
            serial_number = line.split()[-1]
            output = [host_name, serial_number]
            print(output)
            devwriter = csv.writer(dst)
            devwriter.writerow(output)
